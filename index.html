<!DOCTYPE html>
<html lang="fr">
	<head>
    <link rel="shortcut icon" href="favicon.ico">
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title>Codé Maison - Accessibilité du piéton avec un handicap</title>
		<meta name="generator" content="Bootply" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<!--[if lt IE 9]>
			<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="css/styles.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js'></script>
    <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.css' rel='stylesheet' />
	</head>
	<body>
<!-- begin template -->
<div class="navbar navbar-custom navbar-fixed-top">
 <div class="navbar-header"><a class="navbar-brand" href="index.html"><img alt="" src="images/logo.png" style="width: 150px; margin-top: -9px;"></a>
      <a class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="index.html">Accueil</a></li>
        <li><a href="faq.html">Foire aux questions</a></li>
        <li>&nbsp;</li>
      </ul>
    </div>
</div>

<div class="container-fluid" id="main">
  <div class="row">

    <div class="col-sm-7 col-lg-8">
      <div class="row-fluid">
        <div class="span12">
          <div id="map" class="Map_SharePA"></div>
        </div>
      </div>
    </div>

  	<div class="col-sm-4 col-lg-4" id="left">
      <h2 style="margin-bottom: 32px; font-size:19px">L’appli mobile et participative qui met Paris à la portée de tous</h2>
      <!-- item list -->
      <div class="clicked panel panel-default btn1">
        <a style="cursor:pointer" onclick="update(map3)"><div class="panel-heading"><img src="images/man349.png">Accessibilité des équipements</div></a>
      </div>
      <hr>
      <div class="clicked panel panel-default btn2">
        <a style="cursor:pointer" onclick="update(map2)"><div class="panel-heading"><img src="images/greek1.png">Lieux touristiques et organismes publics accessibles</div></a>
      </div>
      <hr>
      <div class="clicked panel panel-default btn3">
        <a style="cursor:pointer" onclick="HideShowAll()"><div class="panel-heading"><img src="images/placeholder8.png">Tout voir</div></a>
      </div>
      <hr>
      <div class="panel panel-default">
        <a style="cursor:pointer"><div class="panel-heading"><img src="images/construction3.png">Zone de travaux <em style="color:red">(à venir)</em></div></a>
      </div>
      <hr>
      <div class="panel panel-default">
        <a style="cursor:pointer"><div class="panel-heading"><img src="images/parking.png">Places parking accessibles <em style="color:red">(à venir)</em></div></a>
      </div>
      <hr>
      <p><img src="images/1.png" style="margin-right:5px; margin-top:-3px">Accessiblité minimale</p>
      <p><img src="images/2.png" style="margin-right:5px; margin-top:-3px">Accessiblité d'usage</p>
      <p><img src="images/3.png" style="margin-right:5px; margin-top:-3px">Accessiblité totale</p>
      <p><img src="images/4.png" style="margin-right:5px; margin-top:-3px">Accessiblité totale + locaux de travail</p>
    </div>


  </div>
</div>
<!-- end template -->

<script src="js/bootstrap.min.js"></script>

<script type="text/javascript">
$('.btn1').click(function () {
    if ($('.btn1').is('.clicked')) {
        $('.btn1').removeClass('clicked');
    }
    else{
        $('.btn1').addClass('clicked');
    }
    });

      $('.btn2').click(function () {
    if ($('.btn2').is('.clicked')) {
        $('.btn2').removeClass('clicked');
    }
    else{
        $('.btn2').addClass('clicked');
    }
    });

      $('.btn3').click(function () {
    if ($('.btn1,.btn2,.btn3').is('.clicked')) {
        $('.btn1,.btn2,.btn3').removeClass('clicked');
    }
    else{
        $('.btn1,.btn2,.btn3').addClass('clicked');
    }
});
</script>

<script type="text/javascript">
L.mapbox.accessToken = 'pk.eyJ1Ijoic2hhcmVwYSIsImEiOiJmRGtNNjlZIn0.U1emYk6aJMKEM_OmqYdNLg';
var map = L.mapbox.map('map', 'sharepa.kmj6g6i8')
    .setView([48.876026, 2.337730], 12);

function detailsFromLevel (level) {
  switch (level) {
    case 0:
      return {
        color: '#999999',
        description: 'Aucune accessibilité',
      }
    case 1:
      return {
        color: '#ffca7d',
        description: 'Accessibilité minimale',
      }
    case 2:
      return {
        color: '#ffffbe',
        description: 'Accessibilité d\'usage',
      }
    case 3:
      return {
        color: '#b5e681',
        description: 'Accessibilité totale',
      }
    case 4:
      return {
        color: '#3bc353',
        description: 'Accessibilité totale + locaux de travail',
      }
    default:
      return {
        color: '#999999',
        description: 'Pas d\'information',
      }
  }
}

var featureLayer = L.mapbox.featureLayer()
    .loadURL('data/accessibilite_des_equipements_de_la_ville_de_paris.geojson')
    // Once this layer loads, we set a timer to load it again in a few seconds.
    .setFilter(function (feature) {
      return (feature.properties.handicap_moteur > 0);
    })
    .on('ready', function (layer) {
      this.eachLayer(function(marker) {
        var props = marker.toGeoJSON().properties;
        var details = detailsFromLevel(props.handicap_moteur);
        marker.setIcon(L.mapbox.marker.icon({
            'marker-color': details.color,
            'marker-size': 'large'
            //'marker-symbol': 'star'
        }));

        var popup = '<h3>' + props.nom + '</h3>';

        // popup += '<p><small>' + props.numero + ' ' + props.voie + '</small></p>';
        popup += '<p>' + details.description + '</p>';

        /*
        popup += '<ul>';
        if (props.handicap_moteur > -1) {
          popup += '<li>Mobilité : ' + props.handicap_moteur + '/4</li>';
        }
        if (props.handicap_visuel > -1) {
          popup += '<li>Visuel :   ' + props.handicap_visuel + '/4</li>';
        }
        if (props.handicap_auditif > -1) {
          popup += '<li>Auditif :  ' + props.handicap_auditif + '/4</li>';
        }
        popup += '</ul>';
        */

        if (props.remarques) {
          popup += '<p><strong>Remarques :</strong> ' + props.remarques + '</p>';
        }
        popup += '<p style="text-align:center"><small><a href="' + props.lien + '" target="_blank">Site internet</a></small></p>';
        marker.bindPopup(popup);
      });
    })
    .addTo(map);


var featureLayer = L.mapbox.featureLayer()
    .loadURL('data/cartographie_des_etablissements_tourisme_handicap.geojson')
    // .setFilter(function (feature) {
    //   return (feature.properties.handicap_moteur > 0);
    // })
    .on('ready', function (layer) {
      this.eachLayer(function(marker) {
        var props = marker.toGeoJSON().properties;
        marker.setIcon(L.mapbox.marker.icon({
            'marker-color': '#b5e681',
            'marker-size': 'large',
            //'marker-symbol': 'star'
        }));

        var popup = '<h3>' + props.etablissement + '</h3>';

        // popup += '<p><small>' + props.numero + ' ' + props.voie + '</small></p>';
        // popup += '<p>' + details.description + '</p>';

        /*
        popup += '<ul>';
        if (props.handicap_moteur > -1) {
          popup += '<li>Mobilité : ' + props.handicap_moteur + '/4</li>';
        }
        if (props.handicap_visuel > -1) {
          popup += '<li>Visuel :   ' + props.handicap_visuel + '/4</li>';
        }
        if (props.handicap_auditif > -1) {
          popup += '<li>Auditif :  ' + props.handicap_auditif + '/4</li>';
        }
        popup += '</ul>';
        */

        if (props.remarques) {
          popup += '<p><strong>Remarques :</strong> ' + props.remarques + '</p>';
        }
        popup += '<p style="text-align:center"><small><a href="' + props.siteweb + '" target="_blank">Site internet</a></small></p>';
        marker.bindPopup(popup);
      });
    })
    .addTo(map);

</script>


	</body>
</html>
